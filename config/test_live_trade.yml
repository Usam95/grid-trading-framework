# config/test_live_trade.yml
#
# Minimal "Phase B" live/paper test config for app/live_trade.py.
# Later, when we plug in real strategy execution + live results, we'll switch to config/live_trade.yml.

name: xrp_paper_live

# NOTE:
# Your codebase has a RunConfig with top-level "mode", but this test config keeps it simple.
# app/live_trade.py will read engine.mode (and also accepts top-level mode if you add it).
engine:
  mode: paper   # paper=testnet, live=mainnet

data:
  source: binance
  symbol: XRPUSDT
  timeframe: 1m

logging:
  level: INFO

live:
  # ------------------------------------------------------------
  # B1 — Market data feed (public): kline websocket -> CLOSED candles
  #      Goal: prove kline WS works and you receive closed candles.
  #
  # B2 — Private read-only endpoints (needs API keys):
  #      balances, symbol filters, open orders.
  #
  # B3 — Tiny MARKET order test (optional):
  #      Goal: place a very small MARKET order and observe executionReport/fills.
  #
  # B4 — User Data Stream (needs API keys):
  #      Goal: log executionReport/account position/balance events (event-driven, no polling).
  #
  # B5 — LIMIT order lifecycle test (needs API keys):
  #      Goal: place LIMIT below/above market, confirm it's open, cancel it, confirm it's gone.
  # ------------------------------------------------------------

  # B2 = private REST bootstrap (balances, filters, open orders).
  # If true, we require BINANCE_* env vars to exist; otherwise we run read-only.
  require_private_endpoints: true

  # B3 = tiny MARKET order to prove private REST execution works (optional).
  # optional B3
  b3_enabled: false
  b3_side: BUY
  b3_qty: 10.0
  b3_wait_fills_sec: 20

  # B4 = user data stream (listenKey websocket) to receive executionReport / fills.
  # prove B4 quickly (will be "silent" if you never place any order)
  b4_enabled: true


  # B5 = LIMIT lifecycle test (place limit below market, then cancel).
  # B5 limit lifecycle test
  b5_enabled: false
  b5_side: BUY
  b5_qty: 5.0
  b5_price_offset_pct: 0.01     # BUY => 1% below market, SELL => 1% above market
  b5_cancel_after_sec: 5

  # B6 = OrderManager (idempotent clientOrderId + reconciliation + tracking)
  b6_enabled: true

  b8_shadow_enabled: false

  # B9
  execute_enabled: true   # <- flip to true only when you trust the logs

  safety:
    max_open_orders: 40
    max_notional_per_order: 50.0
    max_position_base: 2000.0
    cancel_all_on_shutdown: true

  # # Reduce spam: log only these assets on startup (instead of all non-zero).
  balances_log_assets: ["USDT", "XRP", "BNB"]

  cancel_open_orders_on_startup: true
  cancel_open_orders_only_managed: true
  cancel_open_orders_prefixes: ["GT-", "LT-", "LT_"]

strategy:
  kind: grid.dynamic
  symbol: XRPUSDT
  base_order_size: 5
  n_levels: 60
  range_mode: percent
  spacing: geometric
  lower_pct: 0.1
  upper_pct: 0.1


