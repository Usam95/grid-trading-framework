name: "xrp_grid_1m_research"
description: "Static grid on XRPUSDT with optional parameter search."

mode: backtest

data:
  source: local
  symbol: "XRPUSDT"

  # Target timeframe for this run (raw data is 1m)
  timeframe: "60m"

  # Adjust these according to your downloaded data range
  start: "2025-01-05T00:00:00"
  end:   "2025-11-20T23:59:00"
  root: "historical_data"

  # Optional: timeframes that a research/param-search runner could iterate over
  research_timeframes:
    - "5m"
    - "15m"
    - "30m"
    - "60m"

  # New: integrated split config (DataSplitConfig)
  split:
    mode: ratio          # or "date"
    train_ratio: 0.8     # 80% train/backtest, 20% forward
    # If you want to split by date instead:
    # mode: date
    # split_date: "2025-01-01T00:00:00"


  indicators:
    compute_atr: true
    atr_periods: [50]
    compute_ema: true
    ema_periods: [9, 20, 100]
    compute_rsi: true
    rsi_periods: [25]

engine:
  initial_balance: 1000.0
  initial_base_qty: 0.0

  trading_fee_pct: 0.001
  slippage_pct: 0.0
  max_candles: null

  reservations:
    enabled: true

  constraints:
    enabled: true
    insufficient_funds_mode: "resize"   # "skip" or "resize"
    min_order_qty: 1.0                  # base-asset min qty (engine-side)

  bootstrap:
    mode: "neutral_split"               # "long_only" | "neutral_split" | "neutral_topup"
    initial_quote_to_base_pct: 0.50     # only used by neutral_split

    # only used by neutral_topup:
    target_base_qty: null
    target_base_value_pct: null
    max_topup_quote: null
    
  # Optional: override metrics if you like; these are the defaults
  metrics:
    - net_pnl
    - total_return_pct
    - max_drawdown_pct
    - win_rate_pct
    - profit_factor
    - n_trades

strategy:
  kind: "grid.dynamic"
  symbol: "XRPUSDT"
  base_order_size: 20.0      # used for a normal single backtest run
  n_levels: 40

  # Percent-based range around the first candle close
  range_mode: "percent"      # case-insensitive -> GridRangeMode.PERCENT
  spacing: "arithmetic"      # case-insensitive -> GridSpacing.ARITHMETIC
  range_atr_period: 50
  lower_pct: 0.10            # 10% below
  upper_pct: 0.10            # 10% above

  # absolute range not used in PERCENT mode
  lower_price: null
  upper_price: null

  use_rsi_filter: false
  rsi_period: 14
  rsi_min: 30
  rsi_max: 70

  use_trend_filter: false
  ema_period: 100
  max_deviation_pct: 0.1


logging:
  name: "xrpresearch"
  level: "INFO"
  log_dir: "logs"
  to_console: true
  to_file: true

# Optional block: only used by a research / param-search runner.
# The simple backtest app can ignore this completely.
research:
  enabled: true          # set to false or remove block to disable research
  max_runs: 1000          # optional cap; null/omitted = run all combinations

  param_grid:
    # lists of candidate values â†’ Cartesian product
    base_order_size: [10.0, 20.0, 30.0]
    n_levels: [20, 30, 50, 80]

    # percent-based ranges
    lower_pct: [0.05, 0.10, 0.15]
    upper_pct: [0.05, 0.10, 0.15]

    # absolute ranges (empty = not used)
    lower_price: []
    upper_price: []

    # enums are case-insensitive because of validators
    range_mode: ["percent"]          # values: ["percent", "absolute"]
    spacing: ["arithmetic"]          # values: ["arithmetic", "geometric"]